import{g as H,o as z,b as C,w as p,e as l,c as M,h as U,a as $,F,i as G,j as f,k as J,l as K,m as L,n as W,p as b,S as O,q as Q,s as X,v as Y,T as Z,x as w,y as ee,z as te,A as N,B as ne,C as ae,D as re}from"./index.1d37784f.js";import{V as se,a as le,m as ie,u as oe}from"./dimensions.da7fd089.js";import{V as ue}from"./VContainer.0f7226a7.js";const ye={__name:"ListWrapper",props:["dataList"],setup(e){const r=e,n=H(()=>r.dataList.length);return(t,u)=>(z(),C(ue,null,{default:p(()=>[l(se,null,{default:p(()=>[(z(!0),M(F,null,U($(n),s=>(z(),C(le,{key:s,cols:"2",class:"clickable"},{default:p(()=>[G(t.$slots,"default",{index:s})]),_:2},1024))),128))]),_:3})]),_:3}))}};function be(e){const r=f(null),n=f(null);function t(){r.value=null,n.value=null,fetch($(e)).then(u=>u.json()).then(u=>r.value=u).catch(u=>n.value=u)}return J(e)?K(t):t(),{data:r,error:n}}function ce(e){return{aspectStyles:b(()=>{const r=Number(e.aspectRatio);return r?{paddingBottom:String(1/r*100)+"%"}:void 0})}}const ve=L()({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...ie()},setup(e,r){let{slots:n}=r;const{aspectStyles:t}=ce(e),{dimensionStyles:u}=oe(e);return W(()=>{var s;return l("div",{class:"v-responsive",style:u.value},[l("div",{class:"v-responsive__sizer",style:t.value},null),(s=n.additional)==null?void 0:s.call(n),n.default&&l("div",{class:["v-responsive__content",e.contentClass]},[n.default()])])}),{}}});function de(e,r){if(!O)return;const n=r.modifiers||{},t=r.value,{handler:u,options:s}=typeof t=="object"?t:{handler:t,options:{}},i=new IntersectionObserver(function(){var _;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1?arguments[1]:void 0;const o=(_=e._observe)==null?void 0:_[r.instance.$.uid];if(!o)return;const v=d.some(S=>S.isIntersecting);u&&(!n.quiet||o.init)&&(!n.once||v||o.init)&&u(v,d,g),v&&n.once?x(e,r):o.init=!0},s);e._observe=Object(e._observe),e._observe[r.instance.$.uid]={init:!1,observer:i},i.observe(e)}function x(e,r){var t;const n=(t=e._observe)==null?void 0:t[r.instance.$.uid];!n||(n.observer.unobserve(e),delete e._observe[r.instance.$.uid])}const me={mounted:de,unmounted:x},fe=me,ge=Q({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),y=(e,r)=>{let{slots:n}=r;const{transition:t,...u}=e,{component:s=Z,...i}=typeof t=="object"?t:{};return X(s,Y(typeof t=="string"?{name:t}:i,u),n)},ze=L()({name:"VImg",directives:{intersect:fe},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...ge()},emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,r){let{emit:n,slots:t}=r;const u=f(""),s=f(),i=f(e.eager?"loading":"idle"),d=f(),g=f(),o=b(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),v=b(()=>o.value.aspect||d.value/g.value||0);w(()=>e.src,()=>{_(i.value!=="idle")}),w(v,(a,c)=>{!a&&c&&s.value&&h(s.value)}),ee(()=>_());function _(a){if(!(e.eager&&a)&&!(O&&!a&&!e.eager)){if(i.value="loading",o.value.lazySrc){const c=new Image;c.src=o.value.lazySrc,h(c,null)}!o.value.src||te(()=>{var c,m;if(n("loadstart",((c=s.value)==null?void 0:c.currentSrc)||o.value.src),(m=s.value)!=null&&m.complete){if(s.value.naturalWidth||R(),i.value==="error")return;v.value||h(s.value,null),S()}else v.value||h(s.value),V()})}}function S(){var a;V(),i.value="loaded",n("load",((a=s.value)==null?void 0:a.currentSrc)||o.value.src)}function R(){var a;i.value="error",n("error",((a=s.value)==null?void 0:a.currentSrc)||o.value.src)}function V(){const a=s.value;a&&(u.value=a.currentSrc||a.src)}let I=-1;function h(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const m=()=>{clearTimeout(I);const{naturalHeight:B,naturalWidth:j}=a;B||j?(d.value=j,g.value=B):!a.complete&&i.value==="loading"&&c!=null?I=window.setTimeout(m,c):(a.currentSrc.endsWith(".svg")||a.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,g.value=1)};m()}const T=b(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),E=()=>{var m;if(!o.value.src||i.value==="idle")return null;const a=l("img",{class:["v-img__img",T.value],src:o.value.src,srcset:o.value.srcset,alt:e.alt,sizes:e.sizes,ref:s,onLoad:S,onError:R},null),c=(m=t.sources)==null?void 0:m.call(t);return l(y,{transition:e.transition,appear:!0},{default:()=>[N(c?l("picture",{class:"v-img__picture"},[c,a]):a,[[re,i.value==="loaded"]])]})},P=()=>l(y,{transition:e.transition},{default:()=>[o.value.lazySrc&&i.value!=="loaded"&&l("img",{class:["v-img__img","v-img__img--preload",T.value],src:o.value.lazySrc,alt:e.alt},null)]}),D=()=>t.placeholder?l(y,{transition:e.transition,appear:!0},{default:()=>[(i.value==="loading"||i.value==="error"&&!t.error)&&l("div",{class:"v-img__placeholder"},[t.placeholder()])]}):null,q=()=>t.error?l(y,{transition:e.transition,appear:!0},{default:()=>[i.value==="error"&&l("div",{class:"v-img__error"},[t.error()])]}):null,A=()=>e.gradient?l("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,k=f(!1);{const a=w(v,c=>{c&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{k.value=!0})}),a())})}return W(()=>N(l(ve,{class:["v-img",{"v-img--booting":!k.value}],style:{width:ae(e.width==="auto"?d.value:e.width)},aspectRatio:v.value,"aria-label":e.alt,role:e.alt?"img":void 0},{additional:()=>l(F,null,[l(E,null,null),l(P,null,null),l(A,null,null),l(D,null,null),l(q,null,null)]),default:t.default}),[[ne("intersect"),{handler:_,options:e.options},null,{once:!0}]])),{currentSrc:u,image:s,state:i,naturalWidth:d,naturalHeight:g}}});export{ze as V,ye as _,be as u};
